(this["webpackJsonphigh-performance-teams-game"]=this["webpackJsonphigh-performance-teams-game"]||[]).push([[0],[,,,,function(e,t,n){e.exports={number:"Round_number__37fTP",title:"Round_title__1HpVm",description:"Round_description__3f1zj",center:"Round_center__3U3MJ",rows:"Round_rows__1AIUt",row:"Round_row__2qnAP"}},function(e,t,n){e.exports={roundList:"Actions_roundList__JcHf9",roundVisibleToggle:"Actions_roundVisibleToggle__2UHrl",roundActionList:"Actions_roundActionList__3Lz7T",action:"Actions_action__h09lQ",actionImage:"Actions_actionImage__2XHnf",actionSelected:"Actions_actionSelected__2uB5I"}},,,,,,function(e,t,n){e.exports={tabs:"Tabs_tabs__33r_k",tab:"Tabs_tab__1XZ6E",tabActive:"Tabs_tabActive__s9p5d"}},,function(e,t,n){e.exports={button:"Button_button__2Ce79",primary:"Button_primary__10Br9"}},,,function(e,t,n){e.exports={header:"Header_header__3mObx"}},function(e,t,n){e.exports={content:"Content_content__mFJ5h"}},,,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(2),i=n.n(c),a=n(14),o=n.n(a),s=(n(23),n(1)),u=n(3);function l(){return 1+Math.floor(6*Math.random())}function d(){return l()>=3}var m=n(9);function f(e,t){var n=0;return e.forEach((function(e){n+=e[t]})),n}function b(e,t){var n=[];return e.forEach((function(e){n.push.apply(n,Object(m.a)(e[t]))})),n}var p=Symbol("EFFECT_HIDDEN"),j=n(15);function O(){return null}var h={PROTECTED_FROM_OUTSIDE_DISTRACTION:{name:"Protected from Outside Distraction",available:{round:1},description:"ScrumMaster protects the team from outside distraction",cost:1,effect:O},WORKING_AGREEMENTS:{name:"Working Agreements",available:{round:1},description:"Create Team Working Agreements",cost:1,effect:function(){return{capacity:1,title:"TODO: Working Agreements active"}}},ELIMINATE_LONG_LIVED_FEATURE_BRANCHES:{type:"ENGINEERING",name:"All Work is done on Main or Trunk",available:{round:1},description:"When teams use Feature Branches \u2013 then they\u2019re not really using Continuous integration. Feature branching optimizes for the individual while harming the Team",cost:2,effect:function(){return{capacity:1,title:"TODO: All Work is done on Main or Trunk active"}}},GAME_ACTION_BUILD_SERVER:{type:"ENGINEERING",name:"Build Server",available:{round:1},description:"Setup Build Server and Continuous Integration. This is required to make future engineering improvements",cost:2,effect:O},GAME_ACTION_TEAMS_ON_SAME_FLOOR:{name:"Team Members On SameFloor",available:{round:1},description:"Getting Team Members on the same floor reduces the cost of communication as they don't have to go far to ask questions",cost:3,effect:function(e){return e<5?{capacity:e+1,title:"TODO: Team on same floor since ".concat(e+1," rounds")}:{capacity:5,title:"TODO: Team on same floor since 5 or more rounds"}}},GAME_ACTION_UNIT_TESTING:{type:"ENGINEERING",name:"Unit Testing",available:{round:2,requires:"GAME_ACTION_BUILD_SERVER"},description:"TODO: SOME DESCRIPTION",cost:2,effect:function(){return{capacity:2,title:"TODO: Unit Testing active"}}},GAME_ACTION_INFORMAL_CROSS_TRAINING:{name:"Informal Cross Training",available:{round:3},description:"Informal cross-training for existing team members in an area the team is weak. (Testing anyone?)",cost:1,effect:function(){return{capacity:1,title:"TODO: Informal Cross Training active"}}},GAME_ACTION_FORMAL_CROSS_TRAINING:{name:"Formal Cross-Training",available:{round:3},description:"Formal cross-training for existing team members in an area the team is weak. (Testing anyone?)",cost:3,effect:function(){return{capacity:3,title:"TODO: Informal Cross Training active"}}}},v=Object.entries(h).map((function(e){var t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(s.a)(Object(s.a)({},r),{},{id:n})})),_=Symbol("UNIQUE");function y(e,t,n){return v.map((function(r){if(e<r.available.round)return null;var c,i=((c=r.available.requires)?Array.isArray(c)?c:[c]:[]).filter((function(e){return!t.includes(e)}));if(i.length)return{gameAction:r,status:{type:"MISSING_DEP",unmetDependencies:i}};var a=!1===r.available.unique?n.filter((function(e){return e===r.id})).length:_;return{gameAction:r,status:n.includes(r.id)?{type:"SELECTED",times:a}:{type:"AVAILABLE",times:a}}})).filter((function(e){return null!==e}))}function R(e){return v.find((function(t){return e===t.id}))}var A=[function(e){var t,n=0,r=Object(j.a)(e);try{for(r.s();!(t=r.n()).done;){if(t.value.selectedGameActionIds.map(R).find((function(e){return"ENGINEERING"===e.type})))break;n+=1}}catch(c){r.e(c)}finally{r.f()}return 0===n?null:{capacity:-n,title:"TODO: TechnicalDebt Drag Effect Title",description:"No Engineering improvement for ".concat(n," round").concat(n>1?"s":"")}}];function T(e){return null!==e}function E(e){return e.title!==p}var g={1:{title:"Team, welcome to the World\u2019s Smallest Online Bookstore",description:Object(r.jsx)("p",{children:"We hired you because you\u2019re the best individuals in your respective areas. Please remember that we\u2019re Vulture Capital funded and we have only a few months runway, so you must deliver. This first Sprint, the company really needs you to prove that you can deliver a working \u2026"}),effect:function(){return{capacity:10,title:p}}},3:{title:"We must go live with an early version of the product this round, for CES",description:Object(r.jsx)("p",{children:"Due to your limited productivity in past rounds, management are prepared to offer some options to help you out. We will pay an extra \u20184\u2019 points for anything that helps. Another team member? Overtime?"}),effect:function(){return{capacity:4,title:"Management is paying overtime"}}}};function N(e){return"number"===typeof e&&e>=1&&e<=12}var x={4:{effect:function(e,t){if(e>=3||t.includes("PROTECTED_FROM_OUTSIDE_DISTRACTION")&&e>=2)return null;var n=-3;return t.includes("GAME_ACTION_INFORMAL_CROSS_TRAINING")&&(n+=1),t.includes("GAME_ACTION_FORMAL_CROSS_TRAINING")&&(n+=1),{capacity:n,title:"We\u2019ve had an emergency on another team, we need your best tester for a while."}}}};function I(e){if(!(e<2))return l()+l()}Symbol("GAME_STATE");var C={currentRound:{selectedGameActionIds:[]},pastRounds:[]};function S(e){var t=e.length,n=function(e){for(var t=e.length,n=[],r=0;r<=t;r++){var c,i=g[r+1];if(i){var a=e.slice(0,r);n.push((null===(c=i.effect)||void 0===c?void 0:c.call(i,a))||null)}}return n}(e);if(!e.length)return n.filter(T);var r=b(e,"selectedGameActionIds"),c=e.reduce((function(n,c,i){var a=t-(i+1),o=e.slice(0,i).map((function(e){return e.gremlinRoll})).filter(N),s=function(e,t,n,r){return e.selectedGameActionIds.map((function(e){return function(e,t,n){return R(e).effect(t,n)}(e,t,n)})).concat(e.gremlinRoll&&!r.includes(e.gremlinRoll)?function(e,t,n){var r;return(null===(r=x[e])||void 0===r?void 0:r.effect(t,n))||null}(e.gremlinRoll,t,n):[])}(c,a,r,o);return n.concat(s)}),[]),i=A.map((function(t){return t(e)}));return n.concat(c).concat(i).filter(T)}function G(e){return e.reduce((function(e,t){return e+t.capacity}),0)}function D(e,t){switch(t.type){case"SELECT_GAME_ACTION":return Object(s.a)(Object(s.a)({},e),{},{currentRound:Object(s.a)(Object(s.a)({},e.currentRound),{},{selectedGameActionIds:[].concat(Object(m.a)(e.currentRound.selectedGameActionIds),[t.payload])})});case"UNSELECT_GAME_ACTION":return Object(s.a)(Object(s.a)({},e),{},{currentRound:Object(s.a)(Object(s.a)({},e.currentRound),{},{selectedGameActionIds:e.currentRound.selectedGameActionIds.filter((function(e){return e!==t.payload}))})});case"NEXT_ROUND":return Object(s.a)(Object(s.a)({},e),{},{pastRounds:[].concat(Object(m.a)(e.pastRounds),[t.payload]),currentRound:{selectedGameActionIds:[]}})}}function M(e){return f(e.selectedGameActionIds.map((function(e){return{cost:(t=R(e),t.cost)};var t})),"cost")}function k(){var e,t,n=Object(c.useReducer)(D,C),r=Object(u.a)(n,2),i=r[0],a=r[1],o=S(i.pastRounds),l=G(o),m=o.filter(E),p=l-M(i.currentRound),j=i.pastRounds.length+1;return[{availableGameActions:y(j,b(i.pastRounds,"selectedGameActionIds"),i.currentRound.selectedGameActionIds),currentRound:{title:null===(e=g[j])||void 0===e?void 0:e.title,description:null===(t=g[j])||void 0===t?void 0:t.description,number:j,capacity:{available:p,total:l},activeEffects:m},result:{storiesCompleted:f(i.pastRounds,"storiesCompleted")},pastRounds:i.pastRounds.map((function(e,t){return{number:t+1}}))},a,function(){return function(e){var t=G(S(e.pastRounds))-M(e.currentRound);return Object(s.a)(Object(s.a)({},e.currentRound),{},{gremlinRoll:I(e.pastRounds.length+1),storiesCompleted:t<=0?0:Array(t).fill("").filter(d).length})}(i)}]}function w(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{children:"Results"}),Object(r.jsxs)("p",{children:["Completed ",e.storiesCompleted," user stories"]})]})}var F=n(10),L=n(7),U=n.n(L),W=n(13),B=n.n(W);function P(e){var t=e.primary,n=e.className,c=Object(F.a)(e,["primary","className"]);return Object(r.jsx)("button",Object(s.a)({className:U()(n,B.a.button,t&&B.a.primary)},c))}var V=n(4),H=n.n(V);function q(e){var t=Object(c.useState)(!1),n=Object(u.a)(t,2),i=n[0],a=n[1];return Object(r.jsxs)(r.Fragment,{children:[e.description&&i&&e.description,e.description&&Object(r.jsxs)(P,{onClick:function(){return a(!i)},children:[i?"Hide":"Show"," Description"]}),Object(r.jsx)(P,{primary:!0,onClick:e.onNext,children:"Complete Round"}),e.children]})}function J(e){var t=Object(c.useState)({type:"welcome"}),n=Object(u.a)(t,2),i=n[0],a=n[1],o=e.currentRound.description?Object(r.jsx)("div",{className:H.a.description,children:e.currentRound.description}):null;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("h4",{className:H.a.number,children:["Round ",e.currentRound.number," of ",6]}),e.currentRound.title&&Object(r.jsx)("h2",{className:H.a.title,children:e.currentRound.title}),"welcome"===i.type&&Object(r.jsxs)(r.Fragment,{children:[o,Object(r.jsx)("div",{className:H.a.center,children:Object(r.jsx)(P,{primary:!0,onClick:function(){return a({type:"actions"})},children:"Start Round"})})]}),"actions"===i.type&&Object(r.jsx)(q,{onNext:function(){return a({type:"results",payload:e.closeRound()})},description:o,children:Object(r.jsxs)("div",{className:H.a.rows,children:[Object(r.jsx)("div",{className:H.a.row,children:e.row1}),Object(r.jsx)("div",{className:H.a.row,children:e.row2})]})}),"results"===i.type&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("ul",{children:[Object(r.jsxs)("li",{children:["Attempted ",e.currentRound.capacity.available," Stories"]}),Object(r.jsxs)("li",{children:["Completed ",i.payload.storiesCompleted," Stories"]})]}),Object(r.jsx)("div",{className:H.a.center,children:Object(r.jsx)(P,{primary:!0,onClick:function(){return e.dispatch({type:"NEXT_ROUND",payload:i.payload})},children:"Next Round"})})]})]})}var X=n(5),z=n.n(X);function Q(e){var t=Object(c.useRef)();return Object(r.jsxs)("button",{onClick:function(){t.current&&clearTimeout(t.current),t.current=setTimeout((function(){return e.onClick()}),300)},onDoubleClick:function(){t.current&&clearTimeout(t.current),e.onDoubleClick()},className:U()(z.a.action,"SELECTED"===e.status.type&&z.a.actionSelected),disabled:"MISSING_DEP"===e.status.type,children:[Object(r.jsx)("span",{className:z.a.actionImage,style:{backgroundImage:"url(https://placekitten.com/100/100)"}}),Object(r.jsx)("span",{className:z.a.actionTitle,children:e.gameAction.name})]})}function K(e){var t=Object(c.useState)(e.initialVisible),n=Object(u.a)(t,2),i=n[0],a=n[1];return Object(r.jsxs)("li",{children:[Object(r.jsxs)("button",{className:z.a.roundVisibleToggle,onClick:function(){return a(!i)},children:["Round ",e.round," ",i?"\u25b2":"\u25bc"]}),i&&Object(r.jsx)("ul",{className:z.a.roundActionList,children:e.actionsWithStatus.map((function(t){var n=t.status,c=t.gameAction;return Object(r.jsx)("li",{children:Object(r.jsx)(Q,{status:n,gameAction:c,onClick:function(){return console.log("open")},onDoubleClick:function(){return e.dispatch({type:"SELECTED"===n.type?"UNSELECT_GAME_ACTION":"SELECT_GAME_ACTION",payload:c.id})}})},c.id)}))})]})}function Z(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{children:"Available Actions"}),Object(r.jsx)("ul",{className:z.a.roundList,children:Array(e.currentRound).fill("").map((function(t,n){var c,i=n+1;return Object(r.jsx)(K,{dispatch:e.dispatch,initialVisible:i===e.currentRound,round:i,actionsWithStatus:e.availableGameActions.filter((c=i,function(e){return e.gameAction.available.round===c}))},i)}))})]})}function Y(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("p",{children:["Capacity: ",e.capacity.available," / ",e.capacity.total]}),0!==e.activeEffects.length&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h3",{children:"Active Effects"}),e.activeEffects.map((function(e){return Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:e.title}),Object(r.jsxs)("p",{children:["Capacity: ",e.capacity]}),e.description&&Object(r.jsx)("p",{children:e.description})]},e.title)}))]})]})}var $=n(16),ee=n.n($);function te(e){return Object(r.jsxs)("div",{className:ee.a.header,children:[Object(r.jsx)("h1",{children:"High-Performance Team Game "}),e.children]})}function ne(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{children:"Rules"}),Object(r.jsx)("p",{children:"..."})]})}var re=n(17),ce=n.n(re);function ie(e){return Object(r.jsx)("div",{className:ce.a.content,children:e.children})}var ae=n(11),oe=n.n(ae);function se(e){return Object(r.jsx)("div",{className:oe.a.tabs,children:e.children})}function ue(e){var t=e.active,n=e.className,c=Object(F.a)(e,["active","className"]);return Object(r.jsx)("button",Object(s.a)({className:U()(oe.a.tab,n,t&&oe.a.tabActive)},c))}function le(){var e=k(),t=Object(u.a)(e,3),n=t[0],i=t[1],a=t[2],o=Object(c.useState)("play"),l=Object(u.a)(o,2),d=l[0],m=l[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(te,{children:Object(r.jsxs)(se,{children:[Object(r.jsx)(ue,{active:"play"===d,onClick:function(){return m("play")},children:"Play"}),Object(r.jsx)(ue,{active:"rules"===d,onClick:function(){return m("rules")},children:"Rules"})]})}),Object(r.jsxs)(ie,{children:["play"===d&&Object(r.jsx)(r.Fragment,{children:n.currentRound.number>6?Object(r.jsx)(w,{storiesCompleted:n.result.storiesCompleted}):Object(r.jsx)(J,{dispatch:i,currentRound:n.currentRound,closeRound:a,row1:Object(r.jsx)(Z,{currentRound:n.currentRound.number,availableGameActions:n.availableGameActions,dispatch:i}),row2:Object(r.jsx)(Y,Object(s.a)({},n.currentRound))},n.currentRound.number)}),"rules"===d&&Object(r.jsx)(ne,{})]})]})}o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(le,{})}),document.getElementById("root"))}],[[24,1,2]]]);
//# sourceMappingURL=main.71891bb5.chunk.js.map